(()=>{"use strict";const e="https://xn--80aubmleh.xn--p1ai/%D0%9E%D1%80%D1%83%D0%B6%D0%B5%D0%B9%D0%BD%D0%B0%D1%8F/",n="https://static.monopoly.la.gmru.net/",a=[{iconName:"ability_211.png",engrageName:"Абсолютный контроль"},{iconName:"ability_235.png",engrageName:"Адреналин"},{iconName:"buff_166.png",engrageName:"Астральное тело"},{iconName:"ability_229.png",engrageName:"Баланс элементов"},{iconName:"buff_63.png",engrageName:"Безмятежный дух"},{iconName:"ability_269.png",engrageName:"Безрассудство"},{iconName:"buff_94.png",engrageName:"Беспощадность"},{iconName:"buff_148.png",engrageName:"Бесшумный убийца"},{iconName:"ability_263.png",engrageName:"Бледная луна"},{iconName:"buff_229.png",engrageName:"Божественная защита"},{iconName:"gl_skill_01_26.png",engrageName:"Бомбардировка"},{iconName:"buff_105.png",engrageName:"Бравада"},{iconName:"ability_230.png",engrageName:"Ва-банк"},{iconName:"ability_249.png",engrageName:"Весенний рассвет"},{iconName:"ability_261.png",engrageName:"Воля палача"},{iconName:"ability_45.png",engrageName:"Воплощение Силы"},{iconName:"ability_47.png",engrageName:"Вторая модель"},{iconName:"ability_267.png",engrageName:"Герой-одиночка"},{iconName:"ability_224.png",engrageName:"Гильотина"},{iconName:"buff_237.png",engrageName:"Голем"},{iconName:"ability_223.png",engrageName:"Голос луны"},{iconName:"achieve_08_49.png",engrageName:"Гравитационное сжатие"},{iconName:"buff_121.png",engrageName:"Гренадер"},{iconName:"buff_191.png",engrageName:"Грозовая буря"},{iconName:"ability_222.png",engrageName:"Жажда"},{iconName:"achieve_08_62.png",engrageName:"Засада"},{iconName:"ability_237.png",engrageName:"Заступник"},{iconName:"achieve_07_22.png",engrageName:"Избранный путь"},{iconName:"ability_273.png",engrageName:"Император"},{iconName:"ability_272.png",engrageName:"Императрица"},{iconName:"buff_168.png",engrageName:"Иссечение"},{iconName:"buff_122.png",engrageName:"Источник маны"},{iconName:"ability_215.png",engrageName:"Исцеляющая вера"},{iconName:"ability_275.png",engrageName:"Кантата доблести"},{iconName:"ability_231.png",engrageName:"Карающая длань"},{iconName:"ability_271.png",engrageName:"Кибер-солдат"},{iconName:"ability_248.png",engrageName:"Круговорот светил"},{iconName:"buff_177.png",engrageName:"Ликующий дух"},{iconName:"buff_170.png",engrageName:"Лучшая защита"},{iconName:"achieve_06_14.png",engrageName:"Мастер подготовки"},{iconName:"ability_214.png",engrageName:"Мастер-фехтовальщик"},{iconName:"buff_235.png",engrageName:"Медитация"},{iconName:"ability_225.png",engrageName:"Миротворец"},{iconName:"buff_10.png",engrageName:"Молниеносные рефлексы"},{iconName:"achieve_03_40.png",engrageName:"Моргенштерн"},{iconName:"buff_78.png",engrageName:"Мудрость Энвиссы"},{iconName:"ability_217.png",engrageName:"Наследие «Генезиса»"},{iconName:"buff_44.png",engrageName:"Несокрушимый боец"},{iconName:"buff_66.png",engrageName:"Неутомимость"},{iconName:"buff_210.png",engrageName:"Неутомимый натиск"},{iconName:"buff_113.png",engrageName:"Новый рассвет"},{iconName:"buff_162.png",engrageName:"Обман смерти"},{iconName:"ability_232.png",engrageName:"Обманный маневр"},{iconName:"ability_240.png",engrageName:"Обострённые чувства"},{iconName:"ability_241.png",engrageName:"Осознанный диссонанс"},{iconName:"ability_209.png",engrageName:"Остаточная энергия"},{iconName:"buff_239.png",engrageName:"Отражающий барьер"},{iconName:"ability_228.png",engrageName:"Отстрел"},{iconName:"ability_234.png",engrageName:"ПАНИКА"},{iconName:"ability_25.png",engrageName:"Перерождение"},{iconName:"buff_600.png",engrageName:"Пистолеты и пули"},{iconName:"buff_136.png",engrageName:"Победная эйфория"},{iconName:"ability_233.png",engrageName:"Побоище"},{iconName:"ability_258.png",engrageName:"Повелитель бури"},{iconName:"ability_208.png",engrageName:"Полнолуние"},{iconName:"buff_245.png",engrageName:"Последний полет"},{iconName:"ability_207.png",engrageName:"Превосходство светил"},{iconName:"achieve_04_30.png",engrageName:"Презрение к слабым"},{iconName:"buff_89.png",engrageName:"Разрушитель щитов"},{iconName:"ability_266.png",engrageName:"Рвение защитника"},{iconName:"ability_259.png",engrageName:"Сезон дождей"},{iconName:"ability_239.png",engrageName:"Скальпель"},{iconName:"ability_238.png",engrageName:"Скорая помощь"},{iconName:"ability_236.png",engrageName:"Скоротечная расправа"},{iconName:"buff_18.png",engrageName:"Собиратель душ"},{iconName:"ability_268.png",engrageName:"Стабильная гравитация"},{iconName:"buff_147.png",engrageName:"Стальные нервы"},{iconName:"buff_65.png",engrageName:"Стремительность"},{iconName:"buff_83.png",engrageName:"Тактическое превосходство"},{iconName:"ability_210.png",engrageName:"Твердая воля"},{iconName:"ability_212.png",engrageName:"Темная сторона"},{iconName:"buff_29.png",engrageName:"Темный пакт"},{iconName:"ability_216.png",engrageName:"Технология Ардетайна"},{iconName:"buff_71.png",engrageName:"Титаноборец"},{iconName:"buff_46.png",engrageName:"Тяжелая броня"},{iconName:"ability_270.png",engrageName:"Тёмное безрассудство"},{iconName:"ability_264.png",engrageName:"Узы судьбы"},{iconName:"ability_242.png",engrageName:"Универсал"},{iconName:"ability_260.png",engrageName:"Хищница"},{iconName:"ability_274.png",engrageName:"Чародейская гениальность"},{iconName:"buff_74.png",engrageName:"Час жатвы"},{iconName:"buff_238.png",engrageName:"Четвертая чакра"},{iconName:"ability_276.png",engrageName:"Экстаз"},{iconName:"ability_221.png",engrageName:"Медлительность"},{iconName:"ability_219.png",engrageName:"Износ"},{iconName:"ability_220.png",engrageName:"Миролюбие"},{iconName:"ability_218.png",engrageName:"Ржавчина"}],t="profile-equipment__character",i="js-injection--gears-power-pending",r="js-injection--sorter-button-active",c="js-injection--sorter-button",o="js-injection--class-icon",l="js-injection--gears-power-header",g="js-injection--gears-power-values-major",s="js-injection--gears-power-values-minor",m="js-injection--gears-power-wrapped",p="js-injection--character-order",u="js-injection--current-profile-quality-wrapper",N="js-injection--current-profile-quality-lines-wrapper",f="js-injection--current-profile-quality-line",d="js-injection--current-profile-quality-text",_="js-injection--current-profile-elixirs-content",b="js-injection--current-profile-elixirs-wrapper",y="js-injection--current-profile-elixirs-dot",h=/.+<div class="level-info2__item"><span>Максимальный рейтинг<\/span><span><small>Ур.<\/small>(?<currentGearsMain>\d*,*\d+).+(?<currentGearsSecondary>.*\d\d)/,E=/.+<div class="level-info2__expedition"><span>Текущий рейтинг снаряжения<\/span><span><small>Ур.<\/small>(?<currentGearsMain>\d*,*\d+).+(?<currentGearsSecondary>.*\d\d)/,v=/.+<img class="profile-character-info__img" src="(?<iconPath>.+?)"/,j=/.*<script type="text\/javascript">[\S\s]*Profile = (?<profileData>\{[\S\s]+\});\n<\/script>/,S=/<FONT.*>(?<itemType>\[.*?\])<\/FONT>(?<exilirName>.+?)<FONT.+>(?<elixirLevel>\d+)/;function x(e){const n=e.match(S);return n&&n.groups&&4===n.length?{itemType:n.groups.itemType.trim(),elixirName:n.groups.exilirName.trim(),elixirLevel:n.groups.elixirLevel.trim()}:null}function C(e){const n=e.match(/\d+/);return n?n[0]:"0"}function L(e,n){return function(a){return function(t){var i,o,l;const s=(null===(i=a.previousSibling)||void 0===i?void 0:i.previousSibling).querySelector(".".concat(r));null==s||s.classList.remove(r),null==s||s.classList.add(c);const m=t.target;null===(o=m.parentElement)||void 0===o||o.classList.remove(c),null===(l=m.parentElement)||void 0===l||l.classList.add(r);let u=a.children;if(u.length>1){let t=[...u];e===w.GEARS_POWER&&t.sort(((e,a)=>{const t=e.querySelector(".".concat(g)),i=a.querySelector(".".concat(g));return t&&i&&parseInt(t.innerHTML.replace(",",""))>parseInt(i.innerHTML.replace(",",""))?-1*n:1*n})),e===w.CREATION&&t.sort(((e,a)=>{const t=e.querySelector(".".concat(p)),i=a.querySelector(".".concat(p));return t&&i&&parseInt(C(t.innerHTML))>parseInt(C(i.innerHTML))?-1*n:1*n}));for(let e=0;e<u.length;e++)a.appendChild(t[e])}}}}var T,w;!function(e){e[e.JSON=0]="JSON",e[e.LIB=1]="LIB",e[e.NONE=3]="NONE"}(T||(T={})),function(e){e[e.CREATION=0]="CREATION",e[e.GEARS_POWER=1]="GEARS_POWER"}(w||(w={}));const O=["медлительность","износ","миролюбие","ржавчина"],B=[{label:"новые",sortByType:w.CREATION,callback:L(w.CREATION,-1),isCurrent:!0},{label:"старые",sortByType:w.CREATION,callback:L(w.CREATION,1),isCurrent:!1},{label:"сильные",sortByType:w.GEARS_POWER,callback:L(w.GEARS_POWER,1),isCurrent:!1},{label:"слабые",sortByType:w.GEARS_POWER,callback:L(w.GEARS_POWER,-1),isCurrent:!1}];var q;function R(e){return n+e}function k(e){if(e===q.ProfileBackground)return"chrome-extension://"+chrome.runtime.id+"/media/img/profile_bg.png"}function A({text:e="",classes:n=[],style:a={}}={}){return M("div",e,n,a)}function I({text:e="",classes:n=[],style:a={}}={}){return M("span",e,n,a)}function P({text:e="",classes:n=[],style:a={},callbacks:t={}}={}){const i=M("button",e,n,a);for(const e in t)i.addEventListener(e,t[e]);return i}function D({src:e,classes:n=[],style:a={}}){const t=M("img","",n,a);return t.src=e,t}function M(e,n="",a=[],t={}){const i=document.createElement(e);return i.classList.add(...a),i.innerHTML=n||"",function(e,n={}){if(n)for(const a in n)e.style[a]=n[a]}(i,t),i}function G(e,n){const a=I({classes:["js-injection--sorter-wrapper"]}),t=I({text:"Сортировка:",classes:["js-injection--sorter-title"],style:{marginRight:"10px"}});a.appendChild(t);for(let t=0;t<e.length;t++){const i=I(),o=P({text:e[t].label,callbacks:{click:e[t].callback(n)}});i.appendChild(o),t<e.length&&(i.style.marginRight="10px"),e[t].isCurrent?i.classList.add(r):i.classList.add(c),a.append(i)}return a}function H(n,a){const t=function(){const e=A({classes:[m]}),n=I({text:"загружаю...",classes:[i]});return e.appendChild(n),e}();a.insertAdjacentElement("beforeend",t),function(n,a){fetch(function(n){return e+n}(n)).then((e=>{e.text().then((e=>{a(e)}))}))}(n,(function(e){var n,a;(function(e){const n=e.getElementsByClassName(i);n&&e.removeChild(n[0])})(t),t.appendChild((a=function(e){const n=e.match(v);return n?n[1]:""}(e),D({src:a,classes:[o],style:{height:"20px",width:"20px"}}))),t.appendChild(A({text:"Снаряжение:",classes:[l]})),t.appendChild((n=function(e){const n=e.match(E);return n?n[1]:""}(e),A({text:n,classes:[g]}))),t.appendChild(function(e){const n=A({classes:[s]}),a=A({text:"/",classes:[s]}),t=A({text:e,classes:[s]});return n.appendChild(a),n.appendChild(t),n}(function(e){const n=e.match(h);return n?n[1]:""}(e)))}))}function W(e){switch(!0){case 0===e:return"rgb(0, 0, 0)";case e<10:return"rgba(255,86,27,255)";case e<30:return"rgba(255,241,13,255)";case e<70:return"rgba(99,177,11,255)";case e<90:return"rgba(16,205,255,255)";case e<100:return"rgba(181,12,255,255)";case 100===e:return"rgba(231,105,41,255)"}return"rgb(0, 0, 0)"}function J(e){switch(!0){case 0===e:case 1===e:return{background:"rgba(247,255,255,255)",color:"rgba(0,0,0,255)"};case 2===e:return{background:"rgba(0,148,209,255)",color:"rgba(255,255,255,255)"};case 3===e:return{background:"rgba(146,0,185,255)",color:"rgba(255,255,255,255)"};case 4===e:return{background:"rgba(205,112,0,255)",color:"rgba(255,255,255,255)"};case 5===e:return{background:"rgba(194,56,0,255)",color:"rgba(255,255,255,255)"}}return{background:"rgba(247,255,255,255)",color:"rgba(0,0,0,255)"}}function F(e){const n=A({classes:[u]}),a=function(e){const n=Math.round(e/100*41);return{filled:n.toString()+"px",remainder:(41-n).toString()+"px"}}(e),t=A({classes:[N]}),i=A({classes:[f],style:{background:W(e),width:a.filled}}),r=A({text:e.toString(),classes:[d]});return n.appendChild(t),n.appendChild(i),n.appendChild(r),n}function V(e){function n(e){const n=A({classes:[_]}),a=A(),t=I({text:e.elixirName,style:{color:"#fff",marginRight:"5px"}});return a.appendChild(t),n.appendChild(a),n}const a=A({classes:[b]});for(let t in e){const i=J(parseInt(e[t].elixirLevel)),r=A({classes:[_]}),c=A({text:e[t].elixirLevel,classes:[y],style:{background:i.background,color:i.color}});r.appendChild(c),r.appendChild(n(e[t]));const o=A();a.appendChild(r),a.appendChild(o)}return a}!function(e){e[e.ProfileBackground=0]="ProfileBackground"}(q||(q={})),function(){const e=document.querySelectorAll(".".concat("profile-character-list__char"));if(e)for(let a=0;a<e.length;a++){const t=e[a].getElementsByTagName("button");for(let e=0;e<t.length;e++)H(t[e].getElementsByTagName("span")[0].innerHTML,t[e]),n=e,t[e].insertAdjacentElement("beforebegin",function(e){return A({text:"["+e.toString()+"]",classes:[p]})}(n+1))}var n}(),function(){var e;const n=document.querySelectorAll(".".concat("profile-character-list__server"));for(let a=0;a<n.length;a++){const t=null===(e=n[a].nextSibling)||void 0===e?void 0:e.nextSibling;n[a].appendChild(G(B,t))}}(),function(){var e;const i=null===(e=document.querySelector("html"))||void 0===e?void 0:e.innerHTML;if(i){const e=function(e){const n=e.match(j);let a=null;return n&&(a=JSON.parse(n[1])),a}(i);e&&(function(e){for(let n in e)if("ItemTitle"===e[n].Element_001.type&&e[n].Element_001.value.qualityValue&&-1!=e[n].Element_001.value.qualityValue){const a=document.querySelector('[data-item="'+n+'"]');a&&a.insertAdjacentElement("beforeend",F(e[n].Element_001.value.qualityValue))}}(e.Equip),function(e){function t(t){let i=t.getElementsByTagName("span")[0].innerHTML;t.classList.add("js-injection--current-profile-engrave-wrapper");const r=i.match(/(.*)(\d+ ур.)/);if(r&&3===r.length){t.getElementsByTagName("span")[0].innerHTML=r[1],O.includes(r[1].trim().toLowerCase())&&(t.getElementsByTagName("span")[0].style.color="red");const i=I({text:r[2],classes:["js-injection--current-profile-engrave-level"]});t.appendChild(i);const c=function(t){for(let n in e)if(e[n].Element_000.value.toLowerCase().trim()==t.toLowerCase().trim())return{urlSource:T.JSON,url:R(e[n].Element_001.value.slotData.iconPath)};const i=function(e){const t=a.findIndex((n=>n.engrageName.trim().toLowerCase()==e.trim().toLowerCase()));if(t>=0){const e="efui_iconatlas/"+a[t].iconName.split("_")[0]+"/"+a[t].iconName;return n+e}return""}(t);return i?{urlSource:T.LIB,url:i}:{urlSource:T.NONE,url:""}}(r[1]);if(c.urlSource!=T.NONE){t.getElementsByTagName("span")[0].style.fontWeight="bold !important";const e=D({src:c.url,classes:["js-injection--current-profile-engrave-icon"],style:{height:"20px",width:"20px"}});return t.insertBefore(e,t.getElementsByTagName("span")[0]),c.urlSource}}return T.NONE}(function(){const e=document.querySelector(".".concat("swiper-wrapper"));if(e)for(let n=0;n<e.children.length;n++)for(let a=0;a<e.children[n].children.length;a++){let i=e.children[n].children[a];const r=t(i);r===T.JSON&&e.children[0].insertBefore(i,e.children[0].children[0]),n>0&&(r===T.JSON?e.children[0].insertBefore(i,e.children[0].children[0]):e.children[0].appendChild(i),a--)}})(),function(){const e=document.querySelector(".".concat("swiper-container")),n=document.querySelector(".".concat("swiper-option"));e&&n&&e.removeChild(n)}()}(e.Engrave),function(e){let n;for(let a in e){if(e[a].Element_007&&e[a].Element_007.value&&e[a].Element_007.value.Element_000&&e[a].Element_007.value.Element_000.contentStr)n=e[a].Element_007.value.Element_000.contentStr;else{if(!(e[a].Element_008&&e[a].Element_008.value&&e[a].Element_008.value.Element_000&&e[a].Element_008.value.Element_000.contentStr))continue;n=e[a].Element_008.value.Element_000.contentStr}const t=document.querySelector('[data-item="'+a+'"]');if(t){const e=[];for(let a in n){const t=x(n[a].contentStr);t&&e.push(t)}const a=window.getComputedStyle(t),i=V(e);i.style.top=a.top,i.style.left=(parseInt(a.left.slice(0,-2))+55).toString()+"px",t.insertAdjacentElement("afterend",i)}}if(n){const e=document.querySelector(".".concat(t));e&&e.classList.add("profile-equipment__character-override")}}(e.Equip),function(){const e=D({src:k(q.ProfileBackground),classes:[t,"js-injection--profile-background"]}),n=document.querySelector(".".concat(t));if(n){const a=n.children[0].cloneNode(),t=n.children[0].cloneNode();n.children[0].style.zIndex="2",a.classList.add("js-injection--profile-image-shadow-01"),t.classList.add("js-injection--profile-image-shadow-02"),n.appendChild(e),n.appendChild(a),n.appendChild(t)}}())}}()})();