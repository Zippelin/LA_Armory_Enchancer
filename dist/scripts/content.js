(()=>{"use strict";const e="https://xn--80aubmleh.xn--p1ai/%D0%9E%D1%80%D1%83%D0%B6%D0%B5%D0%B9%D0%BD%D0%B0%D1%8F/",n="https://static.monopoly.la.gmru.net/",a=[{iconName:"ability_211.png",engrageName:"Абсолютный контроль"},{iconName:"ability_235.png",engrageName:"Адреналин"},{iconName:"buff_166.png",engrageName:"Астральное тело"},{iconName:"ability_229.png",engrageName:"Баланс элементов"},{iconName:"buff_63.png",engrageName:"Безмятежный дух"},{iconName:"ability_269.png",engrageName:"Безрассудство"},{iconName:"buff_94.png",engrageName:"Беспощадность"},{iconName:"buff_148.png",engrageName:"Бесшумный убийца"},{iconName:"ability_263.png",engrageName:"Бледная луна"},{iconName:"buff_229.png",engrageName:"Божественная защита"},{iconName:"gl_skill_01_26.png",engrageName:"Бомбардировка"},{iconName:"buff_105.png",engrageName:"Бравада"},{iconName:"ability_230.png",engrageName:"Ва-банк"},{iconName:"ability_249.png",engrageName:"Весенний рассвет"},{iconName:"ability_261.png",engrageName:"Воля палача"},{iconName:"ability_45.png",engrageName:"Воплощение Силы"},{iconName:"ability_47.png",engrageName:"Вторая модель"},{iconName:"ability_267.png",engrageName:"Герой-одиночка"},{iconName:"ability_224.png",engrageName:"Гильотина"},{iconName:"buff_237.png",engrageName:"Голем"},{iconName:"ability_223.png",engrageName:"Голос луны"},{iconName:"achieve_08_49.png",engrageName:"Гравитационное сжатие"},{iconName:"buff_121.png",engrageName:"Гренадер"},{iconName:"buff_191.png",engrageName:"Грозовая буря"},{iconName:"ability_222.png",engrageName:"Жажда"},{iconName:"achieve_08_62.png",engrageName:"Засада"},{iconName:"ability_237.png",engrageName:"Заступник"},{iconName:"achieve_07_22.png",engrageName:"Избранный путь"},{iconName:"ability_273.png",engrageName:"Император"},{iconName:"ability_272.png",engrageName:"Императрица"},{iconName:"buff_168.png",engrageName:"Иссечение"},{iconName:"buff_122.png",engrageName:"Источник маны"},{iconName:"ability_215.png",engrageName:"Исцеляющая вера"},{iconName:"ability_275.png",engrageName:"Кантата доблести"},{iconName:"ability_231.png",engrageName:"Карающая длань"},{iconName:"ability_271.png",engrageName:"Кибер-солдат"},{iconName:"ability_248.png",engrageName:"Круговорот светил"},{iconName:"buff_177.png",engrageName:"Ликующий дух"},{iconName:"buff_170.png",engrageName:"Лучшая защита"},{iconName:"achieve_06_14.png",engrageName:"Мастер подготовки"},{iconName:"ability_214.png",engrageName:"Мастер-фехтовальщик"},{iconName:"buff_235.png",engrageName:"Медитация"},{iconName:"ability_225.png",engrageName:"Миротворец"},{iconName:"buff_10.png",engrageName:"Молниеносные рефлексы"},{iconName:"achieve_03_40.png",engrageName:"Моргенштерн"},{iconName:"buff_78.png",engrageName:"Мудрость Энвиссы"},{iconName:"ability_217.png",engrageName:"Наследие «Генезиса»"},{iconName:"buff_44.png",engrageName:"Несокрушимый боец"},{iconName:"buff_66.png",engrageName:"Неутомимость"},{iconName:"buff_210.png",engrageName:"Неутомимый натиск"},{iconName:"buff_113.png",engrageName:"Новый рассвет"},{iconName:"buff_162.png",engrageName:"Обман смерти"},{iconName:"ability_232.png",engrageName:"Обманный маневр"},{iconName:"ability_240.png",engrageName:"Обострённые чувства"},{iconName:"ability_241.png",engrageName:"Осознанный диссонанс"},{iconName:"ability_209.png",engrageName:"Остаточная энергия"},{iconName:"buff_239.png",engrageName:"Отражающий барьер"},{iconName:"ability_228.png",engrageName:"Отстрел"},{iconName:"ability_234.png",engrageName:"ПАНИКА"},{iconName:"ability_25.png",engrageName:"Перерождение"},{iconName:"buff_600.png",engrageName:"Пистолеты и пули"},{iconName:"buff_136.png",engrageName:"Победная эйфория"},{iconName:"ability_233.png",engrageName:"Побоище"},{iconName:"ability_258.png",engrageName:"Повелитель бури"},{iconName:"ability_208.png",engrageName:"Полнолуние"},{iconName:"buff_245.png",engrageName:"Последний полет"},{iconName:"ability_207.png",engrageName:"Превосходство светил"},{iconName:"achieve_04_30.png",engrageName:"Презрение к слабым"},{iconName:"buff_89.png",engrageName:"Разрушитель щитов"},{iconName:"ability_266.png",engrageName:"Рвение защитника"},{iconName:"ability_259.png",engrageName:"Сезон дождей"},{iconName:"ability_239.png",engrageName:"Скальпель"},{iconName:"ability_238.png",engrageName:"Скорая помощь"},{iconName:"ability_236.png",engrageName:"Скоротечная расправа"},{iconName:"buff_18.png",engrageName:"Собиратель душ"},{iconName:"ability_268.png",engrageName:"Стабильная гравитация"},{iconName:"buff_147.png",engrageName:"Стальные нервы"},{iconName:"buff_65.png",engrageName:"Стремительность"},{iconName:"buff_83.png",engrageName:"Тактическое превосходство"},{iconName:"ability_210.png",engrageName:"Твердая воля"},{iconName:"ability_212.png",engrageName:"Темная сторона"},{iconName:"buff_29.png",engrageName:"Темный пакт"},{iconName:"ability_216.png",engrageName:"Технология Ардетайна"},{iconName:"buff_71.png",engrageName:"Титаноборец"},{iconName:"buff_46.png",engrageName:"Тяжелая броня"},{iconName:"ability_270.png",engrageName:"Тёмное безрассудство"},{iconName:"ability_264.png",engrageName:"Узы судьбы"},{iconName:"ability_242.png",engrageName:"Универсал"},{iconName:"ability_260.png",engrageName:"Хищница"},{iconName:"ability_274.png",engrageName:"Чародейская гениальность"},{iconName:"buff_74.png",engrageName:"Час жатвы"},{iconName:"buff_238.png",engrageName:"Четвертая чакра"},{iconName:"ability_276.png",engrageName:"Экстаз"},{iconName:"ability_221.png",engrageName:"Медлительность"},{iconName:"ability_219.png",engrageName:"Износ"},{iconName:"ability_220.png",engrageName:"Миролюбие"},{iconName:"ability_218.png",engrageName:"Ржавчина"}],t="profile-equipment__character",i="js-injection--gears-power-pending",r="js-injection--sorter-button-active",c="js-injection--sorter-button",o="js-injection--class-icon",l="js-injection--gears-power-header",g="js-injection--gears-power-values-major",m="js-injection--gears-power-values-minor",s="js-injection--gears-power-wrapped",u="js-injection--character-order",p="js-injection--current-profile-quality-wrapper",d="js-injection--current-profile-quality-lines-wrapper",N="js-injection--current-profile-quality-line",f="js-injection--current-profile-quality-text",_="js-injection--current-profile-elixirs-content",b="js-injection--current-profile-elixirs-wrapper",y="js-injection--current-profile-elixirs-dot",h=/.+<div class="level-info2__item"><span>Максимальный рейтинг<\/span><span><small>Ур.<\/small>(?<currentGearsMain>\d*,*\d+).+(?<currentGearsSecondary>.*\d\d)/,E=/.+<div class="level-info2__expedition"><span>Текущий рейтинг снаряжения<\/span><span><small>Ур.<\/small>(?<currentGearsMain>\d*,*\d+).+(?<currentGearsSecondary>.*\d\d)/,v=/.+<img class="profile-character-info__img" src="(?<iconPath>.+?)"/,L=/.*<script type="text\/javascript">[\S\s]*Profile = (?<profileData>\{[\S\s]+\});\n<\/script>/,j=/<FONT.*>(?<itemType>\[.*?\])<\/FONT>(?<exilirName>.+?)<FONT.+>(?<elixirLevel>\d+)/;function S(e){const n=e.match(j);return n&&n.groups&&4===n.length?{itemType:n.groups.itemType.trim(),elixirName:n.groups.exilirName.trim(),elixirLevel:n.groups.elixirLevel.trim()}:null}function C(e){const n=e.match(/\d+/);return n?n[0]:"0"}function T(e,n){return function(a){return function(t){var i,o,l;const m=(null===(i=a.previousSibling)||void 0===i?void 0:i.previousSibling).querySelector(r);null==m||m.classList.remove(r),null==m||m.classList.add(c);const s=t.target;null===(o=s.parentElement)||void 0===o||o.classList.remove(c),null===(l=s.parentElement)||void 0===l||l.classList.add(r);let p=a.children;if(p.length>1){let t=[...p];e===w.GEARS_POWER&&t.sort(((e,a)=>{const t=e.querySelector(".".concat(g)),i=a.querySelector(".".concat(g));return t&&i&&parseInt(t.innerHTML.replace(",",""))>parseInt(i.innerHTML.replace(",",""))?-1*n:1*n})),e===w.CREATION&&t.sort(((e,a)=>{const t=e.querySelector(".".concat(u)),i=a.querySelector(".".concat(u));return t&&i&&parseInt(C(t.innerHTML))>parseInt(C(i.innerHTML))?-1*n:1*n}));for(let e=0;e<p.length;e++)a.appendChild(t[e])}}}}var x,w;!function(e){e[e.JSON=0]="JSON",e[e.LIB=1]="LIB",e[e.NONE=3]="NONE"}(x||(x={})),function(e){e[e.CREATION=0]="CREATION",e[e.GEARS_POWER=1]="GEARS_POWER"}(w||(w={}));const O=["медлительность","износ","миролюбие","ржавчина"],B=[{label:"новые",sortByType:w.CREATION,callback:T(w.CREATION,-1),isCurrent:!0},{label:"старые",sortByType:w.CREATION,callback:T(w.CREATION,1),isCurrent:!1},{label:"сильные",sortByType:w.GEARS_POWER,callback:T(w.GEARS_POWER,1),isCurrent:!1},{label:"слабые",sortByType:w.GEARS_POWER,callback:T(w.GEARS_POWER,-1),isCurrent:!1}];var q;function R(e){return n+e}function k(e,n){const a=document.createElement("span");a.classList.add("js-injection--sorter-wrapper");const t=document.createElement("span");t.classList.add("js-injection--sorter-title"),t.innerHTML="Сортировка:",t.style.marginRight="10px",a.appendChild(t);for(let t=0;t<e.length;t++){const i=document.createElement("span"),o=document.createElement("button");o.innerHTML=e[t].label,o.onclick=e[t].callback(n),i.appendChild(o),t<e.length&&(i.style.marginRight="10px"),e[t].isCurrent?i.classList.add(r):i.classList.add(c),a.append(i)}return a}function M(n,a){const t=function(){const e=document.createElement("div");e.classList.add(s);const n=document.createElement("span");return n.innerHTML="загружаю...",n.classList.add(i),e.appendChild(n),e}();a.insertAdjacentElement("beforeend",t),function(n,a){fetch(function(n){return e+n}(n)).then((e=>{e.text().then((e=>{a(e)}))}))}(n,(function(e){(function(e){const n=e.getElementsByClassName(i);n&&e.removeChild(n[0])})(t),t.appendChild(function(e){const n=document.createElement("img");return n.src=e,n.style.height="20px",n.style.width="20px",n.classList.add(o),n}(function(e){const n=e.match(v);return n?n[1]:""}(e))),t.appendChild(function(){const e=document.createElement("div");return e.innerHTML="Снаряжение:",e.classList.add(l),e}()),t.appendChild(function(e){const n=document.createElement("div");return n.innerHTML=e,n.classList.add(g),n}(function(e){const n=e.match(E);return n?n[1]:""}(e))),t.appendChild(function(e){const n=document.createElement("div");n.classList.add(m);const a=document.createElement("div");a.innerHTML="/",a.classList.add(m);const t=document.createElement("div");return t.innerHTML=e,t.classList.add(m),n.appendChild(a),n.appendChild(t),n}(function(e){const n=e.match(h);return n?n[1]:""}(e)))}))}function A(e){switch(!0){case 0===e:case 1===e:return{background:"rgba(247,255,255,255)",color:"rgba(0,0,0,255)"};case 2===e:return{background:"rgba(0,148,209,255)",color:"rgba(255,255,255,255)"};case 3===e:return{background:"rgba(146,0,185,255)",color:"rgba(255,255,255,255)"};case 4===e:return{background:"rgba(205,112,0,255)",color:"rgba(255,255,255,255)"};case 5===e:return{background:"rgba(194,56,0,255)",color:"rgba(255,255,255,255)"}}return{background:"rgba(247,255,255,255)",color:"rgba(0,0,0,255)"}}function I(e){const n=document.createElement("div");n.classList.add(p);const a=function(e){const n=Math.round(e/100*41);return{filled:n.toString()+"px",remainder:(41-n).toString()+"px"}}(e),t=document.createElement("div");t.classList.add(d);const i=document.createElement("div");i.style.background=function(e){switch(!0){case 0===e:return"rgb(0, 0, 0)";case e<10:return"rgba(255,86,27,255)";case e<30:return"rgba(255,241,13,255)";case e<70:return"rgba(99,177,11,255)";case e<90:return"rgba(16,205,255,255)";case e<100:return"rgba(181,12,255,255)";case 100===e:return"rgba(231,105,41,255)"}return"rgb(0, 0, 0)"}(e),i.style.width=a.filled,i.classList.add(N);const r=document.createElement("div");return r.classList.add(f),r.innerText=e.toString(),n.appendChild(t),n.appendChild(i),n.appendChild(r),n}function H(e){function n(e){const n=document.createElement("div");n.classList.add(_);const a=document.createElement("div"),t=document.createElement("span");return t.innerHTML=e.elixirName,t.style.color="#fff",t.style.marginRight="5px",a.appendChild(t),n.appendChild(a),n}const a=document.createElement("div");a.classList.add(b);for(let t in e){const i=document.createElement("div");i.classList.add(_);const r=document.createElement("div");r.classList.add(y);const c=A(parseInt(e[t].elixirLevel));r.style.background=c.background,r.style.color=c.color,r.innerHTML=e[t].elixirLevel,i.appendChild(r),i.appendChild(n(e[t]));const o=document.createElement("div");a.appendChild(i),a.appendChild(o)}return a}!function(e){e[e.ProfileBackground=0]="ProfileBackground"}(q||(q={})),function(){const e=document.querySelectorAll(".".concat("profile-character-list__char"));if(e)for(let a=0;a<e.length;a++){const t=e[a].getElementsByTagName("button");for(let e=0;e<t.length;e++)M(t[e].getElementsByTagName("span")[0].innerHTML,t[e]),n=e,t[e].insertAdjacentElement("beforebegin",function(e){const n=document.createElement("div");return n.innerHTML="["+e.toString()+"]",n.classList.add(u),n}(n+1))}var n}(),function(){var e;const n=document.querySelectorAll(".".concat("profile-character-list__server"));for(let a=0;a<n.length;a++){const t=null===(e=n[a].nextSibling)||void 0===e?void 0:e.nextSibling;n[a].appendChild(k(B,t))}}(),function(){var e;const i=null===(e=document.querySelector("html"))||void 0===e?void 0:e.innerHTML;if(i){const e=function(e){const n=e.match(L);let a=null;return n&&(a=JSON.parse(n[1])),a}(i);e&&(function(e){for(let n in e)if("ItemTitle"===e[n].Element_001.type&&e[n].Element_001.value.qualityValue&&-1!=e[n].Element_001.value.qualityValue){const a=document.querySelector('[data-item="'+n+'"]');a&&a.insertAdjacentElement("beforeend",I(e[n].Element_001.value.qualityValue))}}(e.Equip),function(e){function t(t){let i=t.getElementsByTagName("span")[0].innerHTML;t.classList.add("js-injection--current-profile-engrave-wrapper");const r=i.match(/(.*)(\d+ ур.)/);if(r&&3===r.length){t.getElementsByTagName("span")[0].innerHTML=r[1],O.includes(r[1].trim().toLowerCase())&&(t.getElementsByTagName("span")[0].style.color="red");const i=document.createElement("span");i.innerText=r[2],i.classList.add("js-injection--current-profile-engrave-level"),t.appendChild(i);const c=function(t){for(let n in e)if(e[n].Element_000.value.toLowerCase().trim()==t.toLowerCase().trim())return{urlSource:x.JSON,url:R(e[n].Element_001.value.slotData.iconPath)};const i=function(e){const t=a.findIndex((n=>n.engrageName.trim().toLowerCase()==e.trim().toLowerCase()));if(t>=0){const e="efui_iconatlas/"+a[t].iconName.split("_")[0]+"/"+a[t].iconName;return n+e}return""}(t);return i?{urlSource:x.LIB,url:i}:{urlSource:x.NONE,url:""}}(r[1]);if(c.urlSource!=x.NONE){t.getElementsByTagName("span")[0].style.fontWeight="bold !important";const e=document.createElement("img");return e.src=c.url,e.style.height="20px",e.style.width="20px",e.classList.add("js-injection--current-profile-engrave-icon"),t.insertBefore(e,t.getElementsByTagName("span")[0]),c.urlSource}}return x.NONE}(function(){const e=document.querySelector(".".concat("swiper-wrapper"));if(e)for(let n=0;n<e.children.length;n++)for(let a=0;a<e.children[n].children.length;a++){let i=e.children[n].children[a];const r=t(i);r===x.JSON&&e.children[0].insertBefore(i,e.children[0].children[0]),n>0&&(r===x.JSON?e.children[0].insertBefore(i,e.children[0].children[0]):e.children[0].appendChild(i),a--)}})(),function(){const e=document.querySelector(".".concat("swiper-container")),n=document.querySelector(".".concat("swiper-option"));e&&n&&e.removeChild(n)}()}(e.Engrave),function(e){let n;for(let a in e){if(e[a].Element_007&&e[a].Element_007.value&&e[a].Element_007.value.Element_000&&e[a].Element_007.value.Element_000.contentStr)n=e[a].Element_007.value.Element_000.contentStr;else{if(!(e[a].Element_008&&e[a].Element_008.value&&e[a].Element_008.value.Element_000&&e[a].Element_008.value.Element_000.contentStr))continue;n=e[a].Element_008.value.Element_000.contentStr}const t=document.querySelector('[data-item="'+a+'"]');if(t){const e=[];for(let a in n){const t=S(n[a].contentStr);t&&e.push(t)}const a=window.getComputedStyle(t),i=H(e);i.style.top=a.top,i.style.left=(parseInt(a.left.slice(0,-2))+55).toString()+"px",t.insertAdjacentElement("afterend",i)}}if(n){const e=document.querySelector(".".concat(t));e&&e.classList.add("profile-equipment__character-override")}}(e.Equip),function(){const e=document.createElement("img");e.classList.add(t),e.src=function(e){if(e===q.ProfileBackground)return"chrome-extension://"+chrome.runtime.id+"/media/img/profile_bg.png"}(q.ProfileBackground),e.classList.add("js-injection--profile-background");const n=document.querySelector(".".concat(t));if(n){const a=n.children[0].cloneNode(),t=n.children[0].cloneNode();n.children[0].style.zIndex="2",a.classList.add("js-injection--profile-image-shadow-01"),t.classList.add("js-injection--profile-image-shadow-02"),n.appendChild(e),n.appendChild(a),n.appendChild(t)}}())}}()})();